% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/insol_functions.R
\name{filter_solar_elevation}
\alias{filter_solar_elevation}
\title{Filter times by solar elevation angle}
\usage{
filter_solar_elevation(time, lat, lon, max_zenith = 10, timezone = NULL)
}
\arguments{
\item{time}{Timestamps as POSIXct, POSIXlt, character, or numeric.}

\item{lat}{Latitude in degrees (negative for southern hemisphere)}

\item{lon}{Longitude in degrees (east positive, west negative)}

\item{max_zenith}{Maximum allowed solar zenith angle in degrees.
Times with zenith angles greater than this value will be filtered out.
Default: 10 degrees (solar elevation > 80 degrees)}

\item{timezone}{Optional timezone specification. If NULL (default),
the timezone from the time input is used. If specified, times are
converted to this timezone for calculation.}
}
\value{
Logical vector of the same length as time, where TRUE indicates
the solar zenith angle is less than max_zenith.
}
\description{
Create a logical filter vector indicating times when the solar zenith angle
is below a specified threshold. This is useful for filtering out times when
the sun is too low on the horizon, such as during twilight or nighttime.

The function calculates solar position using the same algorithms as the
clear-sky models, ensuring consistency with the rest of the package.

This function uses the solar position calculations from the insol package
(GPL-2 licensed) that are included in pvflux for solar position computations.
}
\examples{
\dontrun{
# Create sample data
time <- seq(as.POSIXct("2026-01-15 05:00", tz = "UTC"),
            by = "hour", length.out = 24)
lat <- -30.6279  # De Aar, South Africa
lon <- 24.0054

# Filter for times when sun is high in the sky (zenith < 10 degrees)
is_good_time <- filter_solar_elevation(time, lat, lon, max_zenith = 10)

# Get filtered times
high_sun_times <- time[is_good_time]
print(high_sun_times)

# Filter actual measurement data
# ghi_data <- data.frame(time = time, GHI = rnorm(24, 800, 200))
# filtered_data <- ghi_data[is_good_time, ]
}

}
